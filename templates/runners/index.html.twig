{% extends 'base.html.twig' %}

{% block title %}Runners{% endblock %}

{% block body %}
<div class="runners-container">
    <div class="search-container">
        {{ form_start(form) }}
            {{ form_row(form.q) }}
            {{ form_row(form.departements) }}
            {{ form_row(form.levels) }}
            
            <div class="form-group">
                {{ form_label(form.sexe) }}
                {{ form_widget(form.sexe) }}
                {{ form_errors(form.sexe) }}
            </div>


           <div class="form-group age-range">
                <div style="display: inline-block; margin-right: 10px;">
                    {{ form_row(form.ageMin) }}
                </div>
                <div style="display: inline-block;">
                    {{ form_row(form.ageMax) }}
                </div>
            </div>



            <button type="submit">Filtrer</button>
        {{ form_end(form) }}

<script>
function updateMinAge(val) {
    document.getElementById('age-min-val').textContent = val;
}
function updateMaxAge(val) {
    document.getElementById('age-max-val').textContent = val;
}

// Init (au chargement)
document.addEventListener('DOMContentLoaded', function() {
    const min = document.querySelector('input[name="user_search[ageMin]"]');
    const max = document.querySelector('input[name="user_search[ageMax]"]');
    if (min) updateMinAge(min.value);
    if (max) updateMaxAge(max.value);
});
</script>

    </div>
    <div class="search-runners-container">
        <div class="grid">
            {% for runner in runners %}
            <div class="runner-card">
                <a href="{{ path('app_profil', {'id' :  runner.id}) }}">
                {{ runner.firstName }} {{ runner.lastName }} <br>
                {{ runner.city }} <br>
                {{ runner.getAge }} ans<br>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}